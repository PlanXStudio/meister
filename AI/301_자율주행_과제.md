## 라이다 응용 미로 탈출

**track.py**
```python
import sys 
import signal
import time

from serbot2.driving import Driving
from serbot2.LiDAR import Rplidar

DANGER = 25
CAUTION = DANGER + 15
SAFE = CAUTION + 20

drv = Driving()
lidar = Rplidar()

def detect():
    front_list = []
    right_list = []
    left_list = []
    front = right = left = DANGER
    
    for data in lidar.getVectors():
        if data[0] >= 360 - 45 or data[0] < 0 + 45:
            front_list.append(data[1])
        elif data[0] >= 90 - 15 and  data[0] < 90 + 15:
            right_list.append(data[1])
        elif data[0] >= 270 - 15 and data[0] < 270 + 15:
            left_list.append(data[1])
    
    if front_list:
        front = min(front_list) / 10
    
    if right_list:
        right = min(right_list) / 10
    
    if left_list:
        left = min(left_list) / 10
    
    return front, right, left

def setup():
    lidar.startMotor()
    
def loop():
    front, right, left = detect()    
    print(front, right, left)
    
    if front <= DANGER:
        if right > left:
            drv.rotate(50, Driving.SPIN_RIGHT)
        else:
            drv.rotate(50, Driving.SPIN_LEFT)
    elif front <= CAUTION:
        drv.forward(30)
    elif front <= SAFE:
        drv.forward(60)
    else:
        drv.forward(90)
    
def cleanup(*args):
    drv.stop()
    lidar.stopMotor()
    sys.exit(0)


if __name__ == "__main__":
    signal.signal(signal.SIGINT, cleanup)
    setup()
    while True:
        try:
            loop()
        except:
            break
    
```

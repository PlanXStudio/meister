# 영상 처리 응용
- 설치된 모든 파이썬 라이브러리 업데이트
```sh
pip freeze | %{$_.split('==')[0]} | %{pip install --upgrade $_}
```

## 라이브러리 설치
- cvzone(opencv 포함), mediapipe
```python
pip install cvzone mediapipe
```

## OpenCV로 카메라 데이터 처리 
[OpenCV 참고 강좌](https://opencv-python.readthedocs.io/en/latest/)

### 기본 틀
```python
import cv2

cap = cv2.VideoCapture(0)

while True:
    success, frame = cap.read()
    if not success:
        break

    cv2.imshow("Camera", frame)
    
    key = chr(cv2.waitKey(1) & 0xFF)
    if key == 'q':
        cap.release()
        cv2.destroyAllWindows()
```

### 함수 구조 기본
```python
import cv2

def main():
    cap = cv2.VideoCapture(0)

    while True:
        success, frame = cap.read()
        if not success:
            break
        
        cv2.imshow("Camera", frame)
        
        key = chr(cv2.waitKey(1) & 0xFF)
        if key == 'q':
            cap.release()
            cv2.destroyAllWindows()

if __name__ == '__main__':
    main()
```

### 프로세싱 패턴 적용 기본
```python
import sys
import cv2

cap = None

def setup():
    global cap
    cap = cv2.VideoCapture(0)

def doProcessing(frame):
    return frame

def loop():
    success, frame = cap.read()
    frame = doProcessing(frame)
    cv2.imshow("Camera", frame)
    
    key = chr(cv2.waitKey(1) & 0xFF)
    if key == 'q':
        cap.release()
        cv2.destroyAllWindows()
        sys.exit()

def main():
    setup()
    while True:
        loop()

if __name__ == '__main__':
    main()
```

### 일정 시간마다 사직찍기
```python
import sys
import time
import cv2

cap = None
tick_count = None
file_count = 0

import sys
import cv2

cap = None

def setup():
    global cap, tick_count
    cap = cv2.VideoCapture(0)
    tick_count = time.time()

def doProcessing(frame)
    global tick_count, file_count

    if time.time() - tick_count > 5:
        cv2.imwrite(f"./cap{file_count:03d}.jpg", frame)
        file_count += 1
        tick_count = time.time()

    return frame

def loop():
    success, frame = cap.read()
    frame = doProcessing(frame)
    cv2.imshow("Camera", frame)
    
    key = chr(cv2.waitKey(1) & 0xFF)
    if key == 'q':
        cap.release()
        cv2.destroyAllWindows()
        sys.exit()

def main():
    setup()
    while True:
        loop()

if __name__ == '__main__':
    main()
```

## cvzone으로 손 동작 인식
[cvzone 예제](https://github.com/cvzone/cvzone/tree/master/Examples)
